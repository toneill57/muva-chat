# PART0: Production Baseline Export - COMPLETE ‚úÖ

**Generated:** 2025-11-01 11:39 AM
**Source Project:** `ooaumjzaztmutltifhoq` (Production)
**Status:** OPTIONAL STEP COMPLETE

---

## üìä EXECUTIVE SUMMARY

| Metric | Actual | Expected | Status |
|--------|--------|----------|--------|
| **Tables** | 41 | 41 | ‚úÖ EXACT |
| **Total Rows** | 6,943 | ~6,970 | ‚úÖ MATCH |
| **Indexes** | 234 | 225 | ‚ÑπÔ∏è +9 (NEW) |
| **RLS Policies** | 97 | 102 | ‚ö†Ô∏è -5 (optimized?) |
| **Functions** | 89 | 95 | ‚ö†Ô∏è -6 (deleted?) |
| **Extensions** | 8 | 4 | ‚ÑπÔ∏è +4 (standard Supabase) |
| **Foreign Keys** | 46 | N/A | ‚úÖ DOCUMENTED |

---

## üìã DETAILED BREAKDOWN

### Tables by Size (Top 10)

| Table | Rows | Indexes | RLS Policies |
|-------|------|---------|--------------|
| `code_embeddings` | 4,333 | 4 | 1 |
| `muva_content` | 742 | 9 | 2 |
| `prospective_sessions` | 412 | 7 | 2 |
| `chat_messages` | 321 | 6 | 2 |
| `accommodation_units_manual_chunks` | 219 | 7 | 2 |
| `accommodation_units_public` | 151 | 7 | 4 |
| `guest_conversations` | 112 | 7 | 2 |
| `guest_reservations` | 104 | 20 | 4 |
| `reservation_accommodations` | 93 | 4 | 2 |
| `sync_history` | 85 | 5 | 2 |

### Extensions Detected

1. **pg_graphql** (v1.5.11) - GraphQL support
2. **pg_net** (v0.19.5) - HTTP requests from DB
3. **pg_stat_statements** (v1.11) - Query statistics
4. **pgcrypto** (v1.3) - Cryptographic functions
5. **plpgsql** (v1.0) - PL/pgSQL procedural language
6. **supabase_vault** (v0.3.1) - Secrets management
7. **uuid-ossp** (v1.1) - UUID generation
8. **vector** (v0.8.0) - pgvector for embeddings

### Foreign Key Relationships

- **Total FK constraints:** 46
- **Most referenced tables:**
  - `tenant_registry` (tenant_id references)
  - `accommodation_units` (unit references)
  - `guest_reservations` (reservation references)
  - `staff_users` (user references)

---

## üîç OBSERVATIONS

### ‚ÑπÔ∏è Index Count Difference (+9)

**Actual:** 234 indexes
**Expected:** 225 indexes
**Reason:** Likely new indexes added during recent optimization work (Nov 1, 2025)

### ‚ö†Ô∏è RLS Policy Count Difference (-5)

**Actual:** 97 policies
**Expected:** 102 policies
**Possible reasons:**
- Policies consolidated/optimized
- Duplicate policies removed
- Tables without policies yet

### ‚ö†Ô∏è Function Count Difference (-6)

**Actual:** 89 functions
**Expected:** 95 functions
**Possible reasons:**
- Deprecated functions removed
- Functions moved to extensions
- Documentation outdated

### ‚ÑπÔ∏è Extension Count Difference (+4)

**Actual:** 8 extensions
**Expected:** 4 extensions
**Reason:** Standard Supabase extensions included (pg_graphql, pg_stat_statements, supabase_vault, plpgsql)

---

## üìÅ OUTPUT FILES

1. **`execution/_PRODUCTION_BASELINE.json`** (235 KB)
   - Complete database structure
   - All tables with columns, constraints, indexes
   - All RLS policies and functions
   - Foreign key relationships
   - Row counts per table

---

## ‚úÖ VALIDATION RESULTS

- [x] JSON file valid (no syntax errors)
- [x] Contains 41 tables (EXACT match)
- [x] Row count ~6,943 (within expected range)
- [x] All FK relationships documented
- [x] All RLS policies included
- [x] All extensions documented
- [x] All indexes cataloged

---

## üéØ NEXT STEP

**Continue to:** [PART1_DEPENDENCY_ANALYSIS.md](../docs/database/migration-fresh-2025-11-01/PART1_DEPENDENCY_ANALYSIS.md)

This baseline export is OPTIONAL and serves as reference documentation only. The migration can proceed to PART1 without this file.

---

**Generated by:** @agent-database-agent
**Script:** `scripts/phase0-baseline-export.ts`
**Command:** `pnpm dlx tsx scripts/phase0-baseline-export.ts`
