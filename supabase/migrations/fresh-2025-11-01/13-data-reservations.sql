-- =====================================================================================
-- PHASE 3d: RESERVATIONS DATA MIGRATION (REGENERATED)
-- =====================================================================================
-- Generated: 2025-10-31 (CORRECTED)
-- Source: Production database (ooaumjzaztmutltifhoq)
-- Tables: guest_reservations (sample: 10 representative records)
-- 
-- CRITICAL FIX:
-- - Corrected all column names to match production schema
-- - Fixed: id (not reservation_id), phone_full/phone_last_4 (not guest_phone),
--   adults/children (not adults_count/children_count), etc.
-- - All UUIDs, timestamps, and data preserved from production
-- =====================================================================================

BEGIN;

-- =====================================================================================
-- TABLE: guest_reservations (10 sample rows for testing)
-- =====================================================================================
-- Purpose: Guest booking records for multi-tenant hotel system
-- Dependencies: tenant_registry (tenant_id), hotels.accommodation_units (accommodation_unit_id)
-- Note: This is a SAMPLE for migration testing. Full production data: 50+ records
-- =====================================================================================

INSERT INTO guest_reservations (
    id,
    tenant_id,
    guest_name,
    phone_full,
    phone_last_4,
    check_in_date,
    check_out_date,
    reservation_code,
    status,
    created_at,
    updated_at,
    accommodation_unit_id,
    guest_email,
    guest_country,
    adults,
    children,
    total_price,
    currency,
    check_in_time,
    check_out_time,
    booking_source,
    booking_notes,
    external_booking_id,
    accommodation_unit_id_key,
    document_type,
    document_number,
    birth_date,
    first_surname,
    second_surname,
    given_names,
    nationality_code,
    origin_city_code,
    destination_city_code,
    hotel_sire_code,
    hotel_city_code,
    movement_type,
    movement_date
) VALUES
-- Record 1: Test reservation (simmerdown tenant)
(
    '9bf54ca2-2e32-4fce-a3bd-956fc3c07bac',
    'simmerdown',
    'Test Guest',
    '+573001236348',
    '6348',
    '2025-10-14',
    '2025-10-17',
    'TEST-001',
    'active',
    '2025-10-03 07:50:08.153936+00',
    '2025-10-03 07:50:08.153936+00',
    NULL,
    NULL,
    NULL,
    1,
    0,
    NULL,
    'COP',
    '15:00:00',
    '12:00:00',
    'manual',
    NULL,
    NULL,
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
),
-- Record 2: Another test reservation (simmerdown tenant)
(
    '95c36cb8-bcb7-4d6f-a2c7-41ef02a68356',
    'simmerdown',
    'Another Guest',
    '+573001239999',
    '9999',
    '2025-10-15',
    '2025-10-18',
    'TEST-002',
    'active',
    '2025-10-05 18:16:07.568168+00',
    '2025-10-05 18:16:07.568168+00',
    NULL,
    NULL,
    NULL,
    1,
    0,
    NULL,
    'COP',
    '15:00:00',
    '12:00:00',
    'manual',
    NULL,
    NULL,
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
),
-- Record 3: MotoPress booking (loscedrosboutique tenant)
(
    'c1e2705c-39d3-4eee-8ecd-e13d65c97c40',
    '03d2ae98-06f1-407b-992b-ca809dfc333b',
    'Tarek O''Neill',
    '3157706348',
    '0000',
    '2026-08-12',
    '2026-08-15',
    NULL,
    'active',
    '2025-10-19 07:26:06.780796+00',
    '2025-10-19 07:26:06.780796+00',
    NULL,
    'dev@simmerdown.house',
    'CO',
    15,
    0,
    8700000.00,
    'COP',
    '15:00:00',
    '12:00:00',
    'motopress',
    NULL,
    '13731',
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
),
-- Record 4: Generic guest (loscedrosboutique tenant)
(
    'c20ccb9a-a2e8-4c04-aac0-e56a4d4046a8',
    '03d2ae98-06f1-407b-992b-ca809dfc333b',
    'Guest',
    'N/A',
    '0000',
    '2025-12-31',
    '2026-01-06',
    NULL,
    'active',
    '2025-10-19 07:26:07.221107+00',
    '2025-10-19 07:26:07.221107+00',
    NULL,
    NULL,
    NULL,
    15,
    0,
    NULL,
    'COP',
    '15:00:00',
    '12:00:00',
    'motopress',
    NULL,
    '13720',
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
),
-- Record 5: January booking (loscedrosboutique tenant)
(
    'f67d6ee0-75eb-4449-bcf3-7ec0753e3232',
    '03d2ae98-06f1-407b-992b-ca809dfc333b',
    'Guest',
    'N/A',
    '0000',
    '2026-01-15',
    '2026-01-19',
    NULL,
    'active',
    '2025-10-19 07:26:07.529613+00',
    '2025-10-19 07:26:07.529613+00',
    NULL,
    NULL,
    NULL,
    15,
    0,
    NULL,
    'COP',
    '15:00:00',
    '12:00:00',
    'motopress',
    NULL,
    '13722',
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
),
-- Record 6: November booking (loscedrosboutique tenant)
(
    'c1541d0f-d821-4afe-9da5-16a11d645ffb',
    '03d2ae98-06f1-407b-992b-ca809dfc333b',
    'Guest',
    'N/A',
    '0000',
    '2025-11-06',
    '2025-11-09',
    NULL,
    'active',
    '2025-10-19 07:26:07.837355+00',
    '2025-10-19 07:26:07.837355+00',
    NULL,
    NULL,
    NULL,
    15,
    0,
    NULL,
    'COP',
    '15:00:00',
    '12:00:00',
    'motopress',
    NULL,
    '13716',
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
),
-- Record 7: March booking (loscedrosboutique tenant)
(
    '0e880c7d-95a6-4cf6-a332-691c0bedfede',
    '03d2ae98-06f1-407b-992b-ca809dfc333b',
    'Guest',
    'N/A',
    '0000',
    '2026-03-11',
    '2026-03-14',
    NULL,
    'active',
    '2025-10-19 07:26:08.141065+00',
    '2025-10-19 07:26:08.141065+00',
    NULL,
    NULL,
    NULL,
    15,
    0,
    NULL,
    'COP',
    '15:00:00',
    '12:00:00',
    'motopress',
    NULL,
    '13710',
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
),
-- Record 8: May booking (loscedrosboutique tenant)
(
    '882c25ee-2701-4fe8-ae97-4dd4cb557387',
    '03d2ae98-06f1-407b-992b-ca809dfc333b',
    'Guest',
    'N/A',
    '0000',
    '2026-05-23',
    '2026-05-30',
    NULL,
    'active',
    '2025-10-19 07:26:08.462250+00',
    '2025-10-19 07:26:08.462250+00',
    NULL,
    NULL,
    NULL,
    15,
    0,
    NULL,
    'COP',
    '15:00:00',
    '12:00:00',
    'motopress',
    NULL,
    '13712',
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
),
-- Record 9: October booking (loscedrosboutique tenant)
(
    '65a7cfa6-97e2-492b-ac9f-bd07ac528798',
    '03d2ae98-06f1-407b-992b-ca809dfc333b',
    'Guest',
    'N/A',
    '0000',
    '2025-10-23',
    '2025-10-26',
    NULL,
    'active',
    '2025-10-19 07:26:08.764817+00',
    '2025-10-19 07:26:08.764817+00',
    NULL,
    NULL,
    NULL,
    15,
    0,
    NULL,
    'COP',
    '15:00:00',
    '12:00:00',
    'motopress',
    NULL,
    '13702',
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
),
-- Record 10: November late booking (loscedrosboutique tenant)
(
    '4c5d6dba-58c3-4ecb-90f7-9c752532dd05',
    '03d2ae98-06f1-407b-992b-ca809dfc333b',
    'Guest',
    'N/A',
    '0000',
    '2025-11-25',
    '2025-11-30',
    NULL,
    'active',
    '2025-10-19 07:26:09.088728+00',
    '2025-10-19 07:26:09.088728+00',
    NULL,
    NULL,
    NULL,
    15,
    0,
    NULL,
    'COP',
    '15:00:00',
    '12:00:00',
    'motopress',
    NULL,
    '13704',
    '',
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL
);

-- =====================================================================================
-- VERIFICATION
-- =====================================================================================
-- Run these queries to verify data integrity:
--
-- SELECT COUNT(*) FROM guest_reservations;  -- Expected: 10 (sample)
-- 
-- Verify tenant distribution:
-- SELECT tenant_id, COUNT(*) 
-- FROM guest_reservations 
-- GROUP BY tenant_id;
-- Expected: simmerdown (2), 03d2ae98-06f1-407b-992b-ca809dfc333b (8)
--
-- Verify schema columns:
-- SELECT id, guest_name, phone_full, phone_last_4, adults, children, status
-- FROM guest_reservations LIMIT 5;
-- =====================================================================================

COMMIT;

-- =====================================================================================
-- END PHASE 3d: RESERVATIONS DATA MIGRATION (REGENERATED)
-- =====================================================================================
-- Status: PRODUCTION READY - Correct schema, representative sample data
-- Next: Full data migration via production backup or additional migration files
-- =====================================================================================
